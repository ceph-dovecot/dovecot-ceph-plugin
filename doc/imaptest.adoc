ImapTest with POP3
===================

To run ImapTest with the pop3 protocol some configuration and parameter settings are required.

== User Configuration
Create 100 user:
Name = t1 .. t100, Password = t

etc/passwd:

----
t1:{PLAIN}t::::::
t2:{PLAIN}t::::::
t3:{PLAIN}t::::::
...
t100:{PLAIN}t::::::
----

Script to create the users:

----
#!/bin/bash
for i in {1..100}
    do 
         echo "t$i:{PLAIN}t::::::" >> passwd
    done
----

== Dovecot Configuration
Enable POP3 and LMTP via etc/dovecot/dovecot.conf:

----
protocols = imap lmtp pop3
----

Add or change the following entry of etc/dovecot/conf.d/10-master.conf:

----
service lmtp {
  unix_listener lmtp {
    #mode = 0666
  }

  inet_listener lmtp {
    address = 127.0.0.1 ::1
    port = 10024
  }
}
----

== ImapTest Configuration
In the root of ImapTest you find the configuration file pop3-profile.conf. Here a sample content:

----
lmtp_port = 10024
total_user_count = 100
rampup_time = 30s

user aggressive {
  username_format = t%n
  count = 70%

  mail_inbox_delivery_interval = 10s
  mail_spam_delivery_interval = 5s
  mail_action_delay = 2s
  mail_action_repeat_delay = 1s
  mail_session_length = 3 min

  mail_send_interval = 10s
  mail_write_duration = 5s

  mail_inbox_reply_percentage = 50
  mail_inbox_delete_percentage = 5
  mail_inbox_move_percentage = 5
  mail_inbox_move_filter_percentage = 10
}

user normal {
  username_format = t%n
  count = 30%

  mail_inbox_delivery_interval = 5 min
  mail_spam_delivery_interval = 3 min
  mail_action_delay = 3 min
  mail_action_repeat_delay = 10s
  mail_session_length = 20 min

  mail_send_interval = 10 min
  mail_write_duration = 2 min

  mail_inbox_reply_percentage = 50
  mail_inbox_delete_percentage = 5
  mail_inbox_move_percentage = 5
  mail_inbox_move_filter_percentage = 10
}

client pop3 {
  count = 90%
  connection_max_count = 1
  protocol = pop3
  pop3_keep_mails = no
  login_interval = 1min
}

client pop3 {
  count = 10%
  connection_max_count = 1
  protocol = pop3
  pop3_keep_mails = yes
  login_interval = 1min
}
----

== ImapTest Parameter
Run ImapTest with the following parameters:

----
src/imaptest user=t%d pass=t port=10110 profile=pop3-profile.conf output=<path to output file>
----
